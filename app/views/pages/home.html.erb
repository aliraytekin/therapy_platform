<canvas id="bubbles"></canvas>

<div data-controller="toggle-on-empty">
  <div class="gradient-flow text-white py-5">
    <div class="container text-center">
      <h1 class="display-4 fw-bold mb-3">
        Your mental health, your safe space.
      </h1>
      <p class="lead mb-4">
        Find the right therapist and book your session in minutes.
      </p>

      <div class="container my-4">
        <div class="row justify-content-center">
          <div class="col-12 col-md-8 col-lg-6">
            <%= form_with url: therapists_path, method: :get, data: { turbo_frame: "therapists_results" }, class: "d-flex gap-2" do |f| %>
              <%= f.text_field :query,
                        value: params[:query],
                        class: "form-control rounded-xl",
                        data: { controller: "autosubmit",
                                action: "input->autosubmit#input input->toggle-on-empty#toggle",
                                toggle_on_empty_target: "input" },
                        placeholder: "Search by name, specialty, or location..." %>
              <button class="btn secondary-button px-4" type="submit">
                Search
              </button>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container mt-4 mb-2">
    <turbo-frame id="therapists_results">
      <h3 class="text-center mb-3">Our recommended therapists</h3>
      <%= render partial: "therapists/list", locals: { therapists: @therapists } %>
    </turbo-frame>
  </div>

  <div data-toggle-on-empty-target="section" class="<%= 'hidden' if params[:query].present? %>">
    <%= render partial: "why_therapy" %>
  </div>

  <div class="wave-container" data-controller="gsap">
    <svg viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
      <path class="wave wave1" fill="#FF6B6B" d="M0,160L1440,160L1440,320L0,320Z"></path>
      <path class="wave wave2" fill="#F06595" d="M0,180L1440,180L1440,320L0,320Z"></path>
      <path class="wave wave3" fill="#CC5DE8" d="M0,200L1440,200L1440,320L0,320Z"></path>
    </svg>
  </div>

</div>
